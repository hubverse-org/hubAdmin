<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Scripting task configuration files • hubAdmin</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Scripting task configuration files">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://hubdocs.readthedocs.io/en/latest/" class="external-link"><img src="https://raw.githubusercontent.com/hubverse-org/hubStyle/main/inst/hubverse.png" id="logo" height="30" alt="hubverse"></a>
    <a class="navbar-brand me-2" href="../index.html">hubAdmin</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.4.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/hub-setup.html">Setting up a Hub</a></li>
    <li><a class="dropdown-item" href="../articles/scripting-tasks-config.html">Scripting task configuration files</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hubverse-org/hubAdmin/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Scripting task configuration files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hubverse-org/hubAdmin/blob/main/vignettes/articles/scripting-tasks-config.Rmd" class="external-link"><code>vignettes/articles/scripting-tasks-config.Rmd</code></a></small>
      <div class="d-none name"><code>scripting-tasks-config.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>tasks.json</code> configuration file is a formal
representation of a collaborative forecasting challenge. This
configuration file sets a clear standard for model outputs in a hub,
which enables validations of model output submissions to ensure that
they are correctly formatted. Configuration settings in the tasks
configuration file also contain structured information about modeling
tasks that can be used for downstream applications like evaluations and
visualizations of model outputs.</p>
<p>JSON files are easy for a computer to read, but not so easy for a
human to read and write. The hard part of creating a
<code>tasks.json</code> file should be what model parameters to use, not
constantly looking at JSON syntax or hunting down a missing comma. To
make this process easier, <strong>we provide the <code>create_*()</code>
family of functions for creating <code>tasks.json</code> files
programmatically</strong>. These can be useful for creating your initial
<code>task.json</code> file, amending an existing file’s configurations
or even appending new rounds programmatically. By making use of this
functionality, hubs can even automate the process of updating their
files through Github Actions. For example, the <a href="https://github.com/reichlab/variant-nowcast-hub/tree/main" class="external-link">variant
nowcast hub</a> uses a <a href="https://github.com/reichlab/variant-nowcast-hub/blob/29a9265d0b30f385fc47195d3d7f65ecda7a41d2/.github/workflows/create-modeling-round.yaml#L47" class="external-link">GitHub
Action workflow</a> that <a href="https://github.com/reichlab/variant-nowcast-hub/blob/main/src/make_round_config.R" class="external-link">runs
a script</a> to append a new round with updated variants to model on a
weekly schedule!</p>
<p>In this vignette, we will use the config creation functions in
<code>hubAdmin</code> to create a <code>tasks.json</code> file that
represents two rounds of a modeling effort to predict influenza
hospitalizations and optionally deaths 1 to 4 weeks ahead with mean,
median, and quantile predictions in the US, and optionally 5 states.</p>
<p>Before getting to the scripting, it’s important to get a general look
at what a <code>tasks.json</code> file looks like structurally.</p>
</div>
<div class="section level2">
<h2 id="structure-of-a-tasks-json-configuration-file">Structure of a <code>tasks.json</code> configuration file<a class="anchor" aria-label="anchor" href="#structure-of-a-tasks-json-configuration-file"></a>
</h2>
<p>The structure of a <code>tasks.json</code> configuration file roughly
looks like the diagram below:</p>
<pre><code>tasks.json
├─schema_version: "https://.../v4.0.0/tasks-schema.json"
├─rounds:
│ ├─round_id_from_variable: true
│ ├─round_id: origin_date
│ ├─model_tasks:
│ │ ├─task_ids:
│ │ │ └─[...]
│ │ ├─output_type:
│ │ │ └─[...]
│ │ └─target_metadata:
│ │   └─[...]
│ └─submissions_due:
│   └─[...]
├─output_type_id_datatype: "auto"
└─derived_task_ids:
  └─[...]</code></pre>
<p>The first property in a <code>tasks.json</code> file is the
<code>schema_version</code>, which provides a URL to the <a href="https://github.com/hubverse-org/schemas" class="external-link">hubverse schema</a>
version the config file is built against. The schema is used to validate
the structure and contents of the config file. The next property defined
is the list of <strong>rounds</strong> which sets the identifier
(<code>round_id_from_variable</code>, <code>round_id</code>), expected
contents of model submissions (<code>model_tasks</code>), and schedule
(<code>submissions_due</code>) for each round.</p>
<div class="alert alert-info">
<p>There are two ways to define the number of rounds in a hub: 1) One
round object that uses a date task ID variable (most common) or 2)
Several round objects with unique round IDs (least common). In our
example, we will be using the first method by using a variable called
<code>origin_date</code> to define our rounds on a weekly basis. To make
this work, we set <code>round_id_from_variable: true</code> so that the
schema knows that <code>round_id</code> is actually a reference to the
<code>origin_date</code> variable in <code>task_ids</code> so it can
validate that the round IDs are unique.</p>
</div>
<p>These rounds contain one or more <a href="https://hubverse.io/en/latest/user-guide/tasks.html" class="external-link"><strong>modeling
tasks</strong></a> that define the expected content of a model
submission against one or more modeling targets. Each modeling task
includes three properties:</p>
<ul>
<li>
<code>task_ids</code>: a collection of variables that can be used
for modeling efforts. Examples of task ids include <code>location</code>
and <code>origin_date</code>. <strong>Each unique combination of task ID
values represents a single modeling task</strong>.</li>
<li>
<code>output_type</code>: the expected model output
representation</li>
<li>
<code>target_metadata</code>: characteristics for each target (an
example of a modeling target is “Daily incident Flu
Hospitalizations”)</li>
</ul>
</div>
<div class="section level2">
<h2 id="creation-of-a-tasks-json-file">Creation of a <code>tasks.json</code> file<a class="anchor" aria-label="anchor" href="#creation-of-a-tasks-json-file"></a>
</h2>
<p>To create the <code>tasks.json</code> file, we will start from the
inside out. This means that we will create the
<code>target_metadata</code>, <code>task_ids</code>,
<code>output_type</code>s first. We will then use those to create two
<code>model_task</code> objects and then bundle them into two
<code>round</code> objects, which will be inserted into a
<code>config</code> object.</p>
<p>Before we start, the first thing we need to do is to set the correct
version of <a href="https://github.com/hubverse-org/schemas" class="external-link">the
hubverse schemas</a>. By default, the <code>create_*()</code> family of
functions use the latest schema release. To make sure we can always
reproduce the task or append new tasks at a later date, even if a new
schema version is released in the meantime, it’s a good idea to
explicitly set the schema version. We can do this by setting the
<code>hubAdmin.schema_version</code> option. In this example, we will
use the <code>v4.0.0</code> schema:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hubverse-org/hubAdmin" class="external-link">hubAdmin</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>hubAdmin.schema_version <span class="op">=</span> <span class="st">"v4.0.0"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="creating-the-target_metadata-objects">Creating the <code>target_metadata</code> objects<a class="anchor" aria-label="anchor" href="#creating-the-target_metadata-objects"></a>
</h3>
<p>The <code>target_metadata</code> provides both human-readable
(<code>target_name</code> and <code>target_units</code>) and
machine-readable (e.g. <code>target_type</code> and
<code>is_step_ahead</code>) information about the targets.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">target_metadata_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_target_metadata_item.html">create_target_metadata_item</a></span><span class="op">(</span></span>
<span>  target <span class="op">=</span> <span class="st">"inc hosp"</span>,</span>
<span>  target_name <span class="op">=</span> <span class="st">"Weekly incident influenza hospitalizations"</span>,</span>
<span>  target_units <span class="op">=</span> <span class="st">"rate per 100,000 population"</span>,</span>
<span>  target_keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target <span class="op">=</span> <span class="st">"inc hosp"</span><span class="op">)</span>,</span>
<span>  target_type <span class="op">=</span> <span class="st">"discrete"</span>,</span>
<span>  is_step_ahead <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  time_unit <span class="op">=</span> <span class="st">"week"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">target_metadata_death</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_target_metadata_item.html">create_target_metadata_item</a></span><span class="op">(</span></span>
<span>  target <span class="op">=</span> <span class="st">"inc death"</span>,</span>
<span>  target_name <span class="op">=</span> <span class="st">"Weekly incident influenza deaths"</span>,</span>
<span>  target_units <span class="op">=</span> <span class="st">"rate per 100,000 population"</span>,</span>
<span>  target_keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target <span class="op">=</span> <span class="st">"inc death"</span><span class="op">)</span>,</span>
<span>  target_type <span class="op">=</span> <span class="st">"discrete"</span>,</span>
<span>  is_step_ahead <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  time_unit <span class="op">=</span> <span class="st">"week"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">target_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_target_metadata.html">create_target_metadata</a></span><span class="op">(</span><span class="va">target_metadata_hosp</span>, <span class="va">target_metadata_death</span><span class="op">)</span></span></code></pre></div>
<p>If you inspect the <code>target_metadata_hosp</code> object, you will
see that it appears as a class <code>target_metadata_item</code> with
additional attributes about the schema that created it:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">target_metadata_hosp</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 7</span></span>
<span><span class="co">#&gt;  $ target_id    : chr "inc hosp"</span></span>
<span><span class="co">#&gt;  $ target_name  : chr "Weekly incident influenza hospitalizations"</span></span>
<span><span class="co">#&gt;  $ target_units : chr "rate per 100,000 population"</span></span>
<span><span class="co">#&gt;  $ target_keys  :List of 1</span></span>
<span><span class="co">#&gt;   ..$ target: chr "inc hosp"</span></span>
<span><span class="co">#&gt;  $ target_type  : chr "discrete"</span></span>
<span><span class="co">#&gt;  $ is_step_ahead: logi TRUE</span></span>
<span><span class="co">#&gt;  $ time_unit    : chr "week"</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "target_metadata_item" "list"</span></span>
<span><span class="co">#&gt;  - attr(*, "schema_id")= chr "https://raw.githubusercontent.com/hubverse-org/schemas/main/v4.0.0/tasks-schema.json"</span></span>
<span><span class="co">#&gt;  - attr(*, "branch")= chr "main"</span></span></code></pre></div>
<p>Likewise, <code>target_metadata</code> is a combination of
<code>target_metadata_hosp</code>, and
<code>target_metadata_death</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">target_metadata</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ target_metadata:List of 2</span></span>
<span><span class="co">#&gt;   ..$ :List of 7</span></span>
<span><span class="co">#&gt;   .. ..$ target_id    : chr "inc hosp"</span></span>
<span><span class="co">#&gt;   .. ..$ target_name  : chr "Weekly incident influenza hospitalizations"</span></span>
<span><span class="co">#&gt;   .. ..$ target_units : chr "rate per 100,000 population"</span></span>
<span><span class="co">#&gt;   .. ..$ target_keys  :List of 1</span></span>
<span><span class="co">#&gt;   .. .. ..$ target: chr "inc hosp"</span></span>
<span><span class="co">#&gt;   .. ..$ target_type  : chr "discrete"</span></span>
<span><span class="co">#&gt;   .. ..$ is_step_ahead: logi TRUE</span></span>
<span><span class="co">#&gt;   .. ..$ time_unit    : chr "week"</span></span>
<span><span class="co">#&gt;   ..$ :List of 7</span></span>
<span><span class="co">#&gt;   .. ..$ target_id    : chr "inc death"</span></span>
<span><span class="co">#&gt;   .. ..$ target_name  : chr "Weekly incident influenza deaths"</span></span>
<span><span class="co">#&gt;   .. ..$ target_units : chr "rate per 100,000 population"</span></span>
<span><span class="co">#&gt;   .. ..$ target_keys  :List of 1</span></span>
<span><span class="co">#&gt;   .. .. ..$ target: chr "inc death"</span></span>
<span><span class="co">#&gt;   .. ..$ target_type  : chr "discrete"</span></span>
<span><span class="co">#&gt;   .. ..$ is_step_ahead: logi TRUE</span></span>
<span><span class="co">#&gt;   .. ..$ time_unit    : chr "week"</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:2] "target_metadata" "list"</span></span>
<span><span class="co">#&gt;  - attr(*, "n")= int 2</span></span>
<span><span class="co">#&gt;  - attr(*, "schema_id")= chr "https://raw.githubusercontent.com/hubverse-org/schemas/main/v4.0.0/tasks-schema.json"</span></span>
<span><span class="co">#&gt;  - attr(*, "branch")= chr "main"</span></span></code></pre></div>
<p>If this process just creates lists with metadata, then why bother
using <code>hubAdmin</code> functions at all to create them? The benefit
is that <code>hubAdmin</code> <code>create_*()</code> functions provide
some basic validation of objects when creating them, helping you catch
some potential mistakes sooner. For example, some of the values are
interdependent and if you accidentally leave one out, the function will
provide a helpful error:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/create_target_metadata_item.html">create_target_metadata_item</a></span><span class="op">(</span></span>
<span>  target <span class="op">=</span> <span class="st">"inc hosp"</span>,</span>
<span>  target_name <span class="op">=</span> <span class="st">"Weekly incident influenza hospitalizations"</span>,</span>
<span>  target_units <span class="op">=</span> <span class="st">"rate per 100,000 population"</span>,</span>
<span>  target_keys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>target <span class="op">=</span> <span class="st">"inc hosp"</span><span class="op">)</span>,</span>
<span>  target_type <span class="op">=</span> <span class="st">"discrete"</span>,</span>
<span>  is_step_ahead <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in get(paste0(generic, ".", class), envir = get_method_env()) : </span></span>
<span><span class="co">#&gt;   object 'type_sum.accel' not found</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `create_target_metadata_item()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> A value must be provided for `time_unit` when `is_step_ahead` is <span style="color: #0000BB;">TRUE</span></span></span></code></pre></div>
<p>Now that we have defined the targets in <code>target_metadata</code>,
we can move on to defining the task ID objects, which will define what
the modeling parameters will be.</p>
</div>
<div class="section level3">
<h3 id="creating-the-task_id-objects">Creating the <code>task_id</code> objects<a class="anchor" aria-label="anchor" href="#creating-the-task_id-objects"></a>
</h3>
<p>In this modeling effort, we want to <strong>require</strong> modelers
to provide week-ahead predictions for the “weekly incident influenza
hospitalizations” target (<code>inc hosp</code>) at the national level
(<code>location</code> = <code>"US"</code>). Model submissions can
optionally include five states, provide up to 4-week-ahead predictions,
and also provide predictions for the “weekly incident influenza deaths”
target (<code>inc death</code>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">origin_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_task_id.html">create_task_id</a></span><span class="op">(</span></span>
<span>  <span class="st">"origin_date"</span>,</span>
<span>  required <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  optional <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-01-02"</span>, <span class="st">"2023-01-09"</span>, <span class="st">"2023-01-16"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">location</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_task_id.html">create_task_id</a></span><span class="op">(</span></span>
<span>  <span class="st">"location"</span>,</span>
<span>  required <span class="op">=</span> <span class="st">"US"</span>,</span>
<span>  optional <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"01"</span>, <span class="st">"02"</span>, <span class="st">"04"</span>, <span class="st">"05"</span>, <span class="st">"06"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">horizon</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_task_id.html">create_task_id</a></span><span class="op">(</span><span class="st">"horizon"</span>, required <span class="op">=</span> <span class="fl">1L</span>, optional <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_task_id.html">create_task_id</a></span><span class="op">(</span><span class="st">"target"</span>, required <span class="op">=</span> <span class="st">"inc hosp"</span>, optional <span class="op">=</span> <span class="st">"inc death"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">task_ids_example</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_task_ids.html">create_task_ids</a></span><span class="op">(</span><span class="va">origin_date</span>, <span class="va">location</span>, <span class="va">horizon</span>, <span class="va">target</span><span class="op">)</span></span></code></pre></div>
<p>Now that we’ve created the task IDs that specify the modeling tasks,
we can define the outputs we expect from the models.</p>
</div>
<div class="section level3">
<h3 id="creating-the-output_type-objects">Creating the <code>output_type</code> objects<a class="anchor" aria-label="anchor" href="#creating-the-output_type-objects"></a>
</h3>
<p>For this example, we want to have three output type objects:</p>
<ol style="list-style-type: decimal">
<li>a required <code>"mean"</code> output type with a “double”
value</li>
<li>a required <code>"quantile"</code> output type with a “double”
value</li>
<li>an optional <code>"median"</code> output type with an “integer”
value</li>
</ol>
<p>Additionally, our two targets will accept a different combination of
output types. Specifically, target <code>"inc hosp"</code> will only
accept <code>"mean"</code> and <code>"median"</code> output types while
<code>"inc death"</code> will only accept <code>"mean"</code> and
<code>"quantile"</code> output types.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mean_out_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_output_type_mean.html">create_output_type_mean</a></span><span class="op">(</span></span>
<span>  is_required <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  value_type <span class="op">=</span> <span class="st">"double"</span>,</span>
<span>  value_minimum <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">median_out_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_output_type_mean.html">create_output_type_median</a></span><span class="op">(</span></span>
<span>  is_required <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  value_type <span class="op">=</span> <span class="st">"integer"</span>,</span>
<span>  value_minimum <span class="op">=</span> <span class="fl">0L</span></span>
<span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">quantile_out_type</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_output_type_quantile.html">create_output_type_quantile</a></span><span class="op">(</span></span>
<span>  required <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span><span class="op">)</span>,</span>
<span>  is_required <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  value_type <span class="op">=</span> <span class="st">"double"</span>,</span>
<span>  value_minimum <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Now that we have our base <code>output_type_item</code> class
objects, we can combine them to create <code>output_type</code> class
objects that we want to use for each particular target.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_type_mean_median</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_output_type.html">create_output_type</a></span><span class="op">(</span><span class="va">mean_out_type</span>, <span class="va">median_out_type</span><span class="op">)</span></span>
<span></span>
<span><span class="va">output_type_mean_quantile</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_output_type.html">create_output_type</a></span><span class="op">(</span><span class="va">mean_out_type</span>, <span class="va">quantile_out_type</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-the-model_task-objects">Creating the <code>model_task</code> objects<a class="anchor" aria-label="anchor" href="#creating-the-model_task-objects"></a>
</h3>
<p>As previously discussed, we want to require a “mean” output for both
tasks, but we want a “quantile” output type for the
<code>inc death</code> target and an optional “median” for the
<code>inc hosp</code> target.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_task_hosp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_model_task.html">create_model_task</a></span><span class="op">(</span></span>
<span>  task_ids <span class="op">=</span> <span class="va">task_ids_example</span>,</span>
<span>  output_type <span class="op">=</span> <span class="va">output_type_mean_median</span>,</span>
<span>  target_metadata <span class="op">=</span> <span class="va">target_metadata</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_task_death</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_model_task.html">create_model_task</a></span><span class="op">(</span></span>
<span>  task_ids <span class="op">=</span> <span class="va">task_ids_example</span>,</span>
<span>  output_type <span class="op">=</span> <span class="va">output_type_mean_quantile</span>,</span>
<span>  target_metadata <span class="op">=</span> <span class="va">target_metadata</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_task_example</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_model_tasks.html">create_model_tasks</a></span><span class="op">(</span><span class="va">model_task_hosp</span>, <span class="va">model_task_death</span><span class="op">)</span></span></code></pre></div>
<p>Now that we have a set of model tasks, we can create rounds for
them.</p>
</div>
<div class="section level3">
<h3 id="creating-the-round-objects">Creating the <code>round</code> objects<a class="anchor" aria-label="anchor" href="#creating-the-round-objects"></a>
</h3>
<p>While the model tasks define what a model output submission should
look like, the round additionally defines the schedule of submissions
and the timeframe under which a submission is considered valid.</p>
<p>The most common way to create rounds is to create a single
<code>round</code> object that and specify a date task ID whose values
will act as the round IDs for each round. These round IDs are used to
calculate the submission window for each modeling round. In our example,
we specify <code>"origin_date"</code> as the source variable for round
IDs. We also specify that the submission window for a given round is a
period of one week, where the beginning of the window is 4 days before
the origin date and the end of the submission window is 2 days after the
origin date. This means if you have an origin date of Monday 2023-01-02,
then valid submission dates for that round are from Thursday 2022-12-29
to Wednesday 2023-01-04</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">round1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_round.html">create_round</a></span><span class="op">(</span></span>
<span>  round_id_from_variable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  round_id <span class="op">=</span> <span class="st">"origin_date"</span>,</span>
<span>  round_name <span class="op">=</span> <span class="st">"Round 1"</span>,</span>
<span>  model_tasks <span class="op">=</span> <span class="va">model_task_example</span>,</span>
<span>  submissions_due <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    relative_to <span class="op">=</span> <span class="st">"origin_date"</span>,</span>
<span>    start <span class="op">=</span> <span class="op">-</span><span class="fl">4L</span>,</span>
<span>    end <span class="op">=</span> <span class="fl">2L</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">rounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_rounds.html">create_rounds</a></span><span class="op">(</span><span class="va">round1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-and-saving-the-tasks-config-file">Creating and saving the <code>tasks</code> config file<a class="anchor" aria-label="anchor" href="#creating-and-saving-the-tasks-config-file"></a>
</h3>
<p>And the penultimate step is to create a config file and write it out
to your hub. At this point, you can specify the data type you expect the
resulting column of a model submission output type id should be. This is
important for downstream analysis and visualization of the data. This is
automatically determined by default, but <strong>it is <a href="https://hubverse.io/en/latest/user-guide/model-output.html#the-importance-of-a-stable-model-output-file-schema" class="external-link">important
to maintain a stable output type ID column data type</a> throughout the
life of your hub.</strong> The consequences of not doing so could lead
to an inability to evaluate past submissions. For example, this hub has
quantile values, so the default would set the value of the
<code>output_type_id</code> column to be a “double.” However, if we
expect to include sample or PMF data submissions in the future, the
default would likely change to “character.” In this case, we do not plan
to include sample or PMF outputs into our hub, so we will set the data
type to “double”</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_config.html">create_config</a></span><span class="op">(</span><span class="va">rounds</span>, output_type_id_datatype <span class="op">=</span> <span class="st">"double"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/write_config.html">write_config</a></span><span class="op">(</span><span class="va">config</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> `config` written out successfully.</span></span></code></pre>
<details><summary>
contents of <code>hub-config/tasks.json</code>
</summary><div class="sourceCode" id="cb14"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="dt">"schema_version"</span><span class="fu">:</span> <span class="st">"https://raw.githubusercontent.com/hubverse-org/schemas/main/v4.0.0/tasks-schema.json"</span><span class="fu">,</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="dt">"rounds"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>      <span class="dt">"round_id_from_variable"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>      <span class="dt">"round_id"</span><span class="fu">:</span> <span class="st">"origin_date"</span><span class="fu">,</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>      <span class="dt">"round_name"</span><span class="fu">:</span> <span class="st">"Round 1"</span><span class="fu">,</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>      <span class="dt">"model_tasks"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>          <span class="dt">"task_ids"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>            <span class="dt">"origin_date"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>              <span class="dt">"required"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>              <span class="dt">"optional"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"2023-01-02"</span><span class="ot">,</span> <span class="st">"2023-01-09"</span><span class="ot">,</span> <span class="st">"2023-01-16"</span><span class="ot">]</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>            <span class="dt">"location"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>              <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>                <span class="st">"US"</span></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>              <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>              <span class="dt">"optional"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"01"</span><span class="ot">,</span> <span class="st">"02"</span><span class="ot">,</span> <span class="st">"04"</span><span class="ot">,</span> <span class="st">"05"</span><span class="ot">,</span> <span class="st">"06"</span><span class="ot">]</span></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>            <span class="dt">"horizon"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>              <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>                <span class="dv">1</span></span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a>              <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a>              <span class="dt">"optional"</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">2</span><span class="ot">,</span> <span class="dv">3</span><span class="ot">,</span> <span class="dv">4</span><span class="ot">]</span></span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a>            <span class="dt">"target"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a>              <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a>                <span class="st">"inc hosp"</span></span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a>              <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a>              <span class="dt">"optional"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a>                <span class="st">"inc death"</span></span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a>              <span class="ot">]</span></span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb14-36"><a href="#cb14-36" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb14-37"><a href="#cb14-37" tabindex="-1"></a>          <span class="dt">"output_type"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-38"><a href="#cb14-38" tabindex="-1"></a>            <span class="dt">"mean"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-39"><a href="#cb14-39" tabindex="-1"></a>              <span class="dt">"output_type_id"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-40"><a href="#cb14-40" tabindex="-1"></a>                <span class="dt">"required"</span><span class="fu">:</span> <span class="kw">null</span></span>
<span id="cb14-41"><a href="#cb14-41" tabindex="-1"></a>              <span class="fu">},</span></span>
<span id="cb14-42"><a href="#cb14-42" tabindex="-1"></a>              <span class="dt">"is_required"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb14-43"><a href="#cb14-43" tabindex="-1"></a>              <span class="dt">"value"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-44"><a href="#cb14-44" tabindex="-1"></a>                <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"double"</span><span class="fu">,</span></span>
<span id="cb14-45"><a href="#cb14-45" tabindex="-1"></a>                <span class="dt">"minimum"</span><span class="fu">:</span> <span class="dv">0</span></span>
<span id="cb14-46"><a href="#cb14-46" tabindex="-1"></a>              <span class="fu">}</span></span>
<span id="cb14-47"><a href="#cb14-47" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb14-48"><a href="#cb14-48" tabindex="-1"></a>            <span class="dt">"median"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-49"><a href="#cb14-49" tabindex="-1"></a>              <span class="dt">"output_type_id"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-50"><a href="#cb14-50" tabindex="-1"></a>                <span class="dt">"required"</span><span class="fu">:</span> <span class="kw">null</span></span>
<span id="cb14-51"><a href="#cb14-51" tabindex="-1"></a>              <span class="fu">},</span></span>
<span id="cb14-52"><a href="#cb14-52" tabindex="-1"></a>              <span class="dt">"is_required"</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb14-53"><a href="#cb14-53" tabindex="-1"></a>              <span class="dt">"value"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-54"><a href="#cb14-54" tabindex="-1"></a>                <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"integer"</span><span class="fu">,</span></span>
<span id="cb14-55"><a href="#cb14-55" tabindex="-1"></a>                <span class="dt">"minimum"</span><span class="fu">:</span> <span class="dv">0</span></span>
<span id="cb14-56"><a href="#cb14-56" tabindex="-1"></a>              <span class="fu">}</span></span>
<span id="cb14-57"><a href="#cb14-57" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb14-58"><a href="#cb14-58" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb14-59"><a href="#cb14-59" tabindex="-1"></a>          <span class="dt">"target_metadata"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-60"><a href="#cb14-60" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb14-61"><a href="#cb14-61" tabindex="-1"></a>              <span class="dt">"target_id"</span><span class="fu">:</span> <span class="st">"inc hosp"</span><span class="fu">,</span></span>
<span id="cb14-62"><a href="#cb14-62" tabindex="-1"></a>              <span class="dt">"target_name"</span><span class="fu">:</span> <span class="st">"Weekly incident influenza hospitalizations"</span><span class="fu">,</span></span>
<span id="cb14-63"><a href="#cb14-63" tabindex="-1"></a>              <span class="dt">"target_units"</span><span class="fu">:</span> <span class="st">"rate per 100,000 population"</span><span class="fu">,</span></span>
<span id="cb14-64"><a href="#cb14-64" tabindex="-1"></a>              <span class="dt">"target_keys"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-65"><a href="#cb14-65" tabindex="-1"></a>                <span class="dt">"target"</span><span class="fu">:</span> <span class="st">"inc hosp"</span></span>
<span id="cb14-66"><a href="#cb14-66" tabindex="-1"></a>              <span class="fu">},</span></span>
<span id="cb14-67"><a href="#cb14-67" tabindex="-1"></a>              <span class="dt">"target_type"</span><span class="fu">:</span> <span class="st">"discrete"</span><span class="fu">,</span></span>
<span id="cb14-68"><a href="#cb14-68" tabindex="-1"></a>              <span class="dt">"is_step_ahead"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb14-69"><a href="#cb14-69" tabindex="-1"></a>              <span class="dt">"time_unit"</span><span class="fu">:</span> <span class="st">"week"</span></span>
<span id="cb14-70"><a href="#cb14-70" tabindex="-1"></a>            <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb14-71"><a href="#cb14-71" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb14-72"><a href="#cb14-72" tabindex="-1"></a>              <span class="dt">"target_id"</span><span class="fu">:</span> <span class="st">"inc death"</span><span class="fu">,</span></span>
<span id="cb14-73"><a href="#cb14-73" tabindex="-1"></a>              <span class="dt">"target_name"</span><span class="fu">:</span> <span class="st">"Weekly incident influenza deaths"</span><span class="fu">,</span></span>
<span id="cb14-74"><a href="#cb14-74" tabindex="-1"></a>              <span class="dt">"target_units"</span><span class="fu">:</span> <span class="st">"rate per 100,000 population"</span><span class="fu">,</span></span>
<span id="cb14-75"><a href="#cb14-75" tabindex="-1"></a>              <span class="dt">"target_keys"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-76"><a href="#cb14-76" tabindex="-1"></a>                <span class="dt">"target"</span><span class="fu">:</span> <span class="st">"inc death"</span></span>
<span id="cb14-77"><a href="#cb14-77" tabindex="-1"></a>              <span class="fu">},</span></span>
<span id="cb14-78"><a href="#cb14-78" tabindex="-1"></a>              <span class="dt">"target_type"</span><span class="fu">:</span> <span class="st">"discrete"</span><span class="fu">,</span></span>
<span id="cb14-79"><a href="#cb14-79" tabindex="-1"></a>              <span class="dt">"is_step_ahead"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb14-80"><a href="#cb14-80" tabindex="-1"></a>              <span class="dt">"time_unit"</span><span class="fu">:</span> <span class="st">"week"</span></span>
<span id="cb14-81"><a href="#cb14-81" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb14-82"><a href="#cb14-82" tabindex="-1"></a>          <span class="ot">]</span></span>
<span id="cb14-83"><a href="#cb14-83" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb14-84"><a href="#cb14-84" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb14-85"><a href="#cb14-85" tabindex="-1"></a>          <span class="dt">"task_ids"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-86"><a href="#cb14-86" tabindex="-1"></a>            <span class="dt">"origin_date"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-87"><a href="#cb14-87" tabindex="-1"></a>              <span class="dt">"required"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb14-88"><a href="#cb14-88" tabindex="-1"></a>              <span class="dt">"optional"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"2023-01-02"</span><span class="ot">,</span> <span class="st">"2023-01-09"</span><span class="ot">,</span> <span class="st">"2023-01-16"</span><span class="ot">]</span></span>
<span id="cb14-89"><a href="#cb14-89" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb14-90"><a href="#cb14-90" tabindex="-1"></a>            <span class="dt">"location"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-91"><a href="#cb14-91" tabindex="-1"></a>              <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-92"><a href="#cb14-92" tabindex="-1"></a>                <span class="st">"US"</span></span>
<span id="cb14-93"><a href="#cb14-93" tabindex="-1"></a>              <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-94"><a href="#cb14-94" tabindex="-1"></a>              <span class="dt">"optional"</span><span class="fu">:</span> <span class="ot">[</span><span class="st">"01"</span><span class="ot">,</span> <span class="st">"02"</span><span class="ot">,</span> <span class="st">"04"</span><span class="ot">,</span> <span class="st">"05"</span><span class="ot">,</span> <span class="st">"06"</span><span class="ot">]</span></span>
<span id="cb14-95"><a href="#cb14-95" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb14-96"><a href="#cb14-96" tabindex="-1"></a>            <span class="dt">"horizon"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-97"><a href="#cb14-97" tabindex="-1"></a>              <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-98"><a href="#cb14-98" tabindex="-1"></a>                <span class="dv">1</span></span>
<span id="cb14-99"><a href="#cb14-99" tabindex="-1"></a>              <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-100"><a href="#cb14-100" tabindex="-1"></a>              <span class="dt">"optional"</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">2</span><span class="ot">,</span> <span class="dv">3</span><span class="ot">,</span> <span class="dv">4</span><span class="ot">]</span></span>
<span id="cb14-101"><a href="#cb14-101" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb14-102"><a href="#cb14-102" tabindex="-1"></a>            <span class="dt">"target"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-103"><a href="#cb14-103" tabindex="-1"></a>              <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-104"><a href="#cb14-104" tabindex="-1"></a>                <span class="st">"inc hosp"</span></span>
<span id="cb14-105"><a href="#cb14-105" tabindex="-1"></a>              <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-106"><a href="#cb14-106" tabindex="-1"></a>              <span class="dt">"optional"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-107"><a href="#cb14-107" tabindex="-1"></a>                <span class="st">"inc death"</span></span>
<span id="cb14-108"><a href="#cb14-108" tabindex="-1"></a>              <span class="ot">]</span></span>
<span id="cb14-109"><a href="#cb14-109" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb14-110"><a href="#cb14-110" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb14-111"><a href="#cb14-111" tabindex="-1"></a>          <span class="dt">"output_type"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-112"><a href="#cb14-112" tabindex="-1"></a>            <span class="dt">"mean"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-113"><a href="#cb14-113" tabindex="-1"></a>              <span class="dt">"output_type_id"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-114"><a href="#cb14-114" tabindex="-1"></a>                <span class="dt">"required"</span><span class="fu">:</span> <span class="kw">null</span></span>
<span id="cb14-115"><a href="#cb14-115" tabindex="-1"></a>              <span class="fu">},</span></span>
<span id="cb14-116"><a href="#cb14-116" tabindex="-1"></a>              <span class="dt">"is_required"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb14-117"><a href="#cb14-117" tabindex="-1"></a>              <span class="dt">"value"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-118"><a href="#cb14-118" tabindex="-1"></a>                <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"double"</span><span class="fu">,</span></span>
<span id="cb14-119"><a href="#cb14-119" tabindex="-1"></a>                <span class="dt">"minimum"</span><span class="fu">:</span> <span class="dv">0</span></span>
<span id="cb14-120"><a href="#cb14-120" tabindex="-1"></a>              <span class="fu">}</span></span>
<span id="cb14-121"><a href="#cb14-121" tabindex="-1"></a>            <span class="fu">},</span></span>
<span id="cb14-122"><a href="#cb14-122" tabindex="-1"></a>            <span class="dt">"quantile"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-123"><a href="#cb14-123" tabindex="-1"></a>              <span class="dt">"output_type_id"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-124"><a href="#cb14-124" tabindex="-1"></a>                <span class="dt">"required"</span><span class="fu">:</span> <span class="ot">[</span><span class="dv">0</span><span class="er">.</span><span class="dv">25</span><span class="ot">,</span> <span class="dv">0</span><span class="er">.</span><span class="dv">5</span><span class="ot">,</span> <span class="dv">0</span><span class="er">.</span><span class="dv">75</span><span class="ot">]</span></span>
<span id="cb14-125"><a href="#cb14-125" tabindex="-1"></a>              <span class="fu">},</span></span>
<span id="cb14-126"><a href="#cb14-126" tabindex="-1"></a>              <span class="dt">"is_required"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb14-127"><a href="#cb14-127" tabindex="-1"></a>              <span class="dt">"value"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-128"><a href="#cb14-128" tabindex="-1"></a>                <span class="dt">"type"</span><span class="fu">:</span> <span class="st">"double"</span><span class="fu">,</span></span>
<span id="cb14-129"><a href="#cb14-129" tabindex="-1"></a>                <span class="dt">"minimum"</span><span class="fu">:</span> <span class="dv">0</span></span>
<span id="cb14-130"><a href="#cb14-130" tabindex="-1"></a>              <span class="fu">}</span></span>
<span id="cb14-131"><a href="#cb14-131" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb14-132"><a href="#cb14-132" tabindex="-1"></a>          <span class="fu">},</span></span>
<span id="cb14-133"><a href="#cb14-133" tabindex="-1"></a>          <span class="dt">"target_metadata"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb14-134"><a href="#cb14-134" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb14-135"><a href="#cb14-135" tabindex="-1"></a>              <span class="dt">"target_id"</span><span class="fu">:</span> <span class="st">"inc hosp"</span><span class="fu">,</span></span>
<span id="cb14-136"><a href="#cb14-136" tabindex="-1"></a>              <span class="dt">"target_name"</span><span class="fu">:</span> <span class="st">"Weekly incident influenza hospitalizations"</span><span class="fu">,</span></span>
<span id="cb14-137"><a href="#cb14-137" tabindex="-1"></a>              <span class="dt">"target_units"</span><span class="fu">:</span> <span class="st">"rate per 100,000 population"</span><span class="fu">,</span></span>
<span id="cb14-138"><a href="#cb14-138" tabindex="-1"></a>              <span class="dt">"target_keys"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-139"><a href="#cb14-139" tabindex="-1"></a>                <span class="dt">"target"</span><span class="fu">:</span> <span class="st">"inc hosp"</span></span>
<span id="cb14-140"><a href="#cb14-140" tabindex="-1"></a>              <span class="fu">},</span></span>
<span id="cb14-141"><a href="#cb14-141" tabindex="-1"></a>              <span class="dt">"target_type"</span><span class="fu">:</span> <span class="st">"discrete"</span><span class="fu">,</span></span>
<span id="cb14-142"><a href="#cb14-142" tabindex="-1"></a>              <span class="dt">"is_step_ahead"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb14-143"><a href="#cb14-143" tabindex="-1"></a>              <span class="dt">"time_unit"</span><span class="fu">:</span> <span class="st">"week"</span></span>
<span id="cb14-144"><a href="#cb14-144" tabindex="-1"></a>            <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb14-145"><a href="#cb14-145" tabindex="-1"></a>            <span class="fu">{</span></span>
<span id="cb14-146"><a href="#cb14-146" tabindex="-1"></a>              <span class="dt">"target_id"</span><span class="fu">:</span> <span class="st">"inc death"</span><span class="fu">,</span></span>
<span id="cb14-147"><a href="#cb14-147" tabindex="-1"></a>              <span class="dt">"target_name"</span><span class="fu">:</span> <span class="st">"Weekly incident influenza deaths"</span><span class="fu">,</span></span>
<span id="cb14-148"><a href="#cb14-148" tabindex="-1"></a>              <span class="dt">"target_units"</span><span class="fu">:</span> <span class="st">"rate per 100,000 population"</span><span class="fu">,</span></span>
<span id="cb14-149"><a href="#cb14-149" tabindex="-1"></a>              <span class="dt">"target_keys"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-150"><a href="#cb14-150" tabindex="-1"></a>                <span class="dt">"target"</span><span class="fu">:</span> <span class="st">"inc death"</span></span>
<span id="cb14-151"><a href="#cb14-151" tabindex="-1"></a>              <span class="fu">},</span></span>
<span id="cb14-152"><a href="#cb14-152" tabindex="-1"></a>              <span class="dt">"target_type"</span><span class="fu">:</span> <span class="st">"discrete"</span><span class="fu">,</span></span>
<span id="cb14-153"><a href="#cb14-153" tabindex="-1"></a>              <span class="dt">"is_step_ahead"</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb14-154"><a href="#cb14-154" tabindex="-1"></a>              <span class="dt">"time_unit"</span><span class="fu">:</span> <span class="st">"week"</span></span>
<span id="cb14-155"><a href="#cb14-155" tabindex="-1"></a>            <span class="fu">}</span></span>
<span id="cb14-156"><a href="#cb14-156" tabindex="-1"></a>          <span class="ot">]</span></span>
<span id="cb14-157"><a href="#cb14-157" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb14-158"><a href="#cb14-158" tabindex="-1"></a>      <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-159"><a href="#cb14-159" tabindex="-1"></a>      <span class="dt">"submissions_due"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-160"><a href="#cb14-160" tabindex="-1"></a>        <span class="dt">"relative_to"</span><span class="fu">:</span> <span class="st">"origin_date"</span><span class="fu">,</span></span>
<span id="cb14-161"><a href="#cb14-161" tabindex="-1"></a>        <span class="dt">"start"</span><span class="fu">:</span> <span class="dv">-4</span><span class="fu">,</span></span>
<span id="cb14-162"><a href="#cb14-162" tabindex="-1"></a>        <span class="dt">"end"</span><span class="fu">:</span> <span class="dv">2</span></span>
<span id="cb14-163"><a href="#cb14-163" tabindex="-1"></a>      <span class="fu">}</span></span>
<span id="cb14-164"><a href="#cb14-164" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb14-165"><a href="#cb14-165" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-166"><a href="#cb14-166" tabindex="-1"></a>  <span class="dt">"output_type_id_datatype"</span><span class="fu">:</span> <span class="st">"double"</span></span>
<span id="cb14-167"><a href="#cb14-167" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
</details>
</div>
</div>
<div class="section level2">
<h2 id="validating-your-config-file">Validating your config file<a class="anchor" aria-label="anchor" href="#validating-your-config-file"></a>
</h2>
<p>One of the strengths of specifying configuration in a JSON format is
that it’s machine-readable, which means that no matter how complex a
JSON file gets, <strong>it can be easily and rapidly validated</strong>.
All hubverse configuration files are validated against a central set of
<a href="https://github.com/hubverse-org/schemas/" class="external-link">hubverse schemas</a>
that specify <em>how</em> a configuration file is constructed. This
allows any tool to be able to read a JSON file and validate it against
the schema to ensure it’s valid.</p>
<p>To check that your configuration file is valid, you can use the
<code><a href="../reference/validate_config.html">validate_config()</a></code> function from the root directory of your
hub:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/validate_config.html">validate_config</a></span><span class="op">(</span>config <span class="op">=</span> <span class="st">"tasks"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Loading required namespace: jsonvalidate</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> ok:  hub-config/tasks.json (<span style="color: #0000BB; font-style: italic;">&lt;file:///path/to/hub/hub-config/tasks.json&gt;</span>) (via tasks-schema v4.0.0 (<span style="color: #0000BB; font-style: italic;">&lt;https://raw.githubusercontent.com/hubverse-org/schemas/main/v4.0.0/tasks-schema.json&gt;</span>))</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anna Krystalli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1. PR Previews built by <a href="https://www.netlify.com" class="external-link">Netlify</a>. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer>
</div>





  </body>
</html>
