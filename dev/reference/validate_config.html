<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Validate a hub config file against a hubverse schema — validate_config • hubAdmin</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Validate a hub config file against a hubverse schema — validate_config"><meta name="description" content="This function validates a single hub config file against it's corresponding
schema.
Note that, for tasks.json config files, validation is performed
in two stages:
Initial validation against the schema is performed using the
jsonvalidate
package which uses the &quot;ajv&quot; (Another JSON Schema Validator) validation engine.
If the initial validation is successful, additional dynamic validations are
performed.
This means that only after the initial validation passes, will any dynamic
validation errors be detected.

"><meta property="og:description" content="This function validates a single hub config file against it's corresponding
schema.
Note that, for tasks.json config files, validation is performed
in two stages:
Initial validation against the schema is performed using the
jsonvalidate
package which uses the &quot;ajv&quot; (Another JSON Schema Validator) validation engine.
If the initial validation is successful, additional dynamic validations are
performed.
This means that only after the initial validation passes, will any dynamic
validation errors be detected.

"><meta property="og:image" content="https://hubverse-org.github.io/hubAdmin/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://hubdocs.readthedocs.io/en/latest/" class="external-link"><img src="https://raw.githubusercontent.com/hubverse-org/hubStyle/main/inst/hubverse.png" id="logo" height="30" alt="hubverse"></a>
    <a class="navbar-brand me-2" href="../index.html">hubAdmin</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.5.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/hub-setup.html">Setting up a Hub</a></li>
    <li><a class="dropdown-item" href="../articles/scripting-tasks-config.html">Scripting task configuration files</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hubverse-org/hubAdmin/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Validate a hub config file against a hubverse schema</h1>
      <small class="dont-index">Source: <a href="https://github.com/hubverse-org/hubAdmin/blob/main/R/validate_config.R" class="external-link"><code>R/validate_config.R</code></a></small>
      <div class="d-none name"><code>validate_config.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function validates a single hub config file against it's corresponding
schema.
Note that, for <code>tasks.json</code> config files, validation is performed
in two stages:</p><ol><li><p>Initial validation against the schema is performed using the
<a href="https://docs.ropensci.org/jsonvalidate/" class="external-link"><code>jsonvalidate</code></a>
package which uses the <code>"ajv"</code> (Another JSON Schema Validator) validation engine.</p></li>
<li><p>If the initial validation is successful, additional dynamic validations are
performed.
This means that only after the initial validation passes, will any dynamic
validation errors be detected.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">validate_config</span><span class="op">(</span></span>
<span>  hub_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  config <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tasks"</span>, <span class="st">"admin"</span><span class="op">)</span>,</span>
<span>  config_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  schema_version <span class="op">=</span> <span class="st">"from_config"</span>,</span>
<span>  branch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"hubAdmin.branch"</span>, default <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-hub-path">hub_path<a class="anchor" aria-label="anchor" href="#arg-hub-path"></a></dt>
<dd><p>Path to a local hub directory.</p></dd>


<dt id="arg-config">config<a class="anchor" aria-label="anchor" href="#arg-config"></a></dt>
<dd><p>Name of config file to validate. One of <code>"tasks"</code> or <code>"admin"</code>.</p></dd>


<dt id="arg-config-path">config_path<a class="anchor" aria-label="anchor" href="#arg-config-path"></a></dt>
<dd><p>Defaults to <code>NULL</code> which assumes all config files are in
the <code>hub-config</code> directory in the root of hub directory. Argument
<code>config_path</code> can be used to override default by providing a path to the
config file to be validated.</p></dd>


<dt id="arg-schema-version">schema_version<a class="anchor" aria-label="anchor" href="#arg-schema-version"></a></dt>
<dd><p>Character string specifying the json schema version to
be used for validation. The default value <code>"from_config"</code> will use the
version specified in the <code>schema_version</code> property of the config file.
<code>"latest"</code> will use the latest version available in the hubverse
<a href="https://github.com/hubverse-org/schemas" class="external-link">schemas repository</a>.
Alternatively, a specific version of a schema (e.g. <code>"v0.0.1"</code>)  can be
specified.</p></dd>


<dt id="arg-branch">branch<a class="anchor" aria-label="anchor" href="#arg-branch"></a></dt>
<dd><p>The branch of the hubverse
<a href="https://github.com/hubverse-org/schemas" class="external-link">schemas repository</a>
from which to fetch schema. Defaults to <code>"main"</code>. Can be set through global
option "hubAdmin.branch".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns the result of validation. If validation is successful, will
return <code>TRUE</code>. If any validation errors are detected, returns <code>FALSE</code> with
details of errors appended as a data.frame to an <code>errors</code> attribute.
To access
the errors table use <code>attr(x, "errors")</code> where <code>x</code> is the output of the function.</p>
<p>You can print a more concise and easier to view version of an errors table with
<code><a href="view_config_val_errors.html">view_config_val_errors()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="view_config_val_errors.html">view_config_val_errors()</a></code></p>
<p>Other functions supporting config file validation:
<code><a href="validate_hub_config.html">validate_hub_config</a>()</code>,
<code><a href="view_config_val_errors.html">view_config_val_errors</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Valid config file</span></span></span>
<span class="r-in"><span><span class="fu">validate_config</span><span class="op">(</span></span></span>
<span class="r-in"><span>  hub_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"testhubs/simple/"</span>,</span></span>
<span class="r-in"><span>    package <span class="op">=</span> <span class="st">"hubUtils"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  config <span class="op">=</span> <span class="st">"tasks"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> ok:  hub-config/tasks.json (<span style="color: #0000BB; font-style: italic;">&lt;file:///home/runner/work/_temp/Library/hubUtils/testhubs/simple/hub-config/tasks.json&gt;</span>) (via tasks-schema v2.0.0 (<span style="color: #0000BB; font-style: italic;">&lt;https://raw.githubusercontent.com/hubverse-org/schemas/main/v2.0.0/tasks-schema.json&gt;</span>))</span>
<span class="r-in"><span><span class="co"># Config file with errors</span></span></span>
<span class="r-in"><span><span class="va">config_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"error-schema/tasks-errors.json"</span>,</span></span>
<span class="r-in"><span>  package <span class="op">=</span> <span class="st">"hubUtils"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">validate_config</span><span class="op">(</span>config_path <span class="op">=</span> <span class="va">config_path</span>, config <span class="op">=</span> <span class="st">"tasks"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Hub configured using schema version <span style="color: #00BB00;">v0.0.0.9</span>. Support for schema earlier than</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">v2.0.0</span> was deprecated in hubUtils 0.0.0.9010.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Please upgrade Hub config files to conform to, at minimum, version <span style="color: #00BB00;">v2.0.0</span> as</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   soon as possible.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> <span style="font-weight: bold;">7 schema errors</span>: error-schema/tasks-errors.json</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   (<span style="color: #0000BB; font-style: italic;">&lt;file:///home/runner/work/_temp/Library/hubUtils/error-schema/tasks-errors.json&gt;</span>)</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   (via tasks-schema v0.0.0.9</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   (<span style="color: #0000BB; font-style: italic;">&lt;https://raw.githubusercontent.com/hubverse-org/schemas/main/v0.0.0.9/tasks-schema.json&gt;</span>))</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> use `view_config_val_errors()` to view table of error details.</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anna Krystalli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1. PR Previews built by <a href="https://www.netlify.com" class="external-link">Netlify</a>. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer></div>





  </body></html>

